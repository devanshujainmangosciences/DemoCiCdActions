<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/lender/NewLender.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/lender/NewLender.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This Component renders a Form to Create a new Lender or Update a existing Lender.
 * This Component gets showLender, Lender, manufacturersList, readManufacturers
 * from Redux as props and  match, history is mapped to props
 * which is used to navigate and get url details.
 * This component reads the Lender id if it is present in url and retrieve the Lender
 * details with Lender id and allow the user to edit
 */
import React, {useState, useEffect} from 'react';
import {
  Col,
  Row,
  Form,
  Button,
  Container,
  Card,
} from '@themesberg/react-bootstrap';
import {useTranslation} from 'react-i18next';
import {useAppDispatch, useAppSelector} from '@/redux/redux-hooks';
import {connect} from 'react-redux';
import PropTypes from 'prop-types';
import {
  createLender,
  drugsList,
  getCitiesFromStateId,
  getMasterData,
  setToast,
  showLender,
  updateLender,
  readRoleList,
  resetSelectedLender,
} from '@/actions';
import {Routes} from '@/routes';
import GoBack from '@/components/GoBack';
import InputForm from '@/pages/profile/children/InputForm';
import {
  getDrugLenderReqData,
  isArrayLengthEqual,
  returnMasterDataSelectValues,
  captalizeEveryWordOfSentence,
} from '@/services/utility';
import {
  dateData,
  dateOrDayOption,
  dayData,
  lastWeekData,
  paymentFrequencyData,
  paymentFrequencyType,
  rebateAmountPaidOption,
  subventionAmountPaidOption,
  weekData,
} from '@/data/staticOptionData';
import RoutePage from '@/components/RoutePage';
import {Can} from '@/components';
import LenderDrugMapping from '@/components/LenderDrugMapping';
import {
  tableLenderDrugConfig,
  tableLenderDrugConfigView,
} from '@/config/lenderDrugMapping';
import {ALERT_MESSAGE, MASTER_DATA_STATE_COUNTRY} from '../../constants';
import {useLocation, useNavigate, useParams} from 'react-router-dom';

const NewLender = (props) => {
  const {t} = useTranslation(['newLender', 'loanApplication', 'viewLender']);
  const {showLender, user, readRoleList, roleList} = props;
  const history = useNavigate();
  const location = useLocation();
  const urlParams = useParams();
  const [name, setName] = useState('');
  const [address, setAddress] = useState('');
  const [city, setCity] = useState('');
  const [state, setState] = useState('');
  const [country, setCountry] = useState('');
  const [paySubventionTo, setpaySubventionTo] = useState('PATIENT');
  const [grantPaymentDate, setgrantPaymentDate] = useState(0);
  const [grantPaymentDay, setgrantPaymentDay] = useState('MONDAY');
  const [grantPaymentWeek, setgrantPaymentWeek] = useState(5);
  const [paymentFrequency, setpaymentFrequency] = useState('PER_CYCLE');
  const [dayDate, setDayDate] = useState('DATE');
  const [payRebateTo, setpayRebateTo] = useState('PATIENT');
  const [isView, setisView] = useState(false);
  const masterData = useAppSelector((state) => state.template.masterData);
  const drugs = useAppSelector((state) => state.template.drugList);
  const [drugList, setDrugList] = useState([]);
  const [drugLenderData, setdrugLenderData] = useState([]);

  const [grantPayoutBankDetails, setgrantPayoutBankDetails] = useState({
    accountNumber: '',
    bankIfscCode: '',
    bankBranch: '',
    bankName: '',
    accountType: 'GRANT',
  });
  const [rebatePayoutBankDetails, setrebatePayoutBankDetails] = useState({
    accountNumber: '',
    bankIfscCode: '',
    bankBranch: '',
    bankName: '',
    accountType: 'REBATE',
  });
  const dispatch = useAppDispatch();
  const user_id = urlParams.id;
  const stateRecieved = location.state;

  /* This `useEffect` hook in a React component to set up a cleanup function that
will be called when the component unmounts. The cleanup function dispatches an action to reset the
selected lender using the `resetSelectedLender` function. The empty dependency array `[]` passed as
the second argument to `useEffect` ensures that the cleanup function is only called once, when the
component mounts. */
  useEffect(() => {
    return () => {
      dispatch(resetSelectedLender());
    };
  }, []);

  /** The below code is using the `useEffect` hook in a React component to update the `drugList` state
variable based on the `drugs` prop. If `drugs` is falsy, it dispatches a `drugsList` action with a
`false` argument. If `drugs` is truthy, it maps over the `drugs` array to create a new array of
objects with `id`, `label`, and `value` properties, and sets the `drugList` state variable to this
new array. The `useEffect` hook is triggered whenever */
  useEffect(() => {
    if (!drugs) {
      dispatch(drugsList(false));
    } else {
      setDrugList(
        drugs.map((drug) => ({
          id: drug.id,
          label: `${drug.brandName}-${drug.drugGenericName}`,
          value: drug.id,
        }))
      );
    }
  }, [drugs]);
  // console.log('DRUGS=>', drugs);
  /**
   * Lifecycle to get the master data if not avaliable in the complete profile page
   */
  useEffect(() => {
    if (!masterData?.countries)
      dispatch(getMasterData(MASTER_DATA_STATE_COUNTRY));
  }, [masterData]);
  /**
   * This Callback acts like ComponentDidMount and ComponentDidUpdate which is used to dispatch
   * readRoleList Action if roleList is null
   */
  useEffect(() => {
    if (!roleList) {
      readRoleList();
    }
  }, [readRoleList, roleList]);

  /**
   * This Callback will set Lender details to corresponding
   * states if Lender and Lender id is not null else it will
   * set all states empty
   */
  useEffect(() => {
    if (stateRecieved &amp;&amp; stateRecieved === 'View Details') setisView(true);
    if (user &amp;&amp; user_id) {
      setName(user.lenderName);
      setAddress(user.lenderAddress);
      const relatedState = masterData.states.find(
        (state) => state.name === user.lenderState
      );
      const customSuccessCallback = () => {
        setCity(user?.lenderCity);
      };
      if (relatedState)
        dispatch(
          getCitiesFromStateId(
            relatedState?.id,
            'cities',
            customSuccessCallback
          )
        );

      setState(user.lenderState);
      setCountry(user.lenderCountry);
      setpaySubventionTo(
        user?.paySubventionTo ? user?.paySubventionTo : 'PATIENT'
      );
      setpayRebateTo(user?.payRebateTo ? user?.payRebateTo : 'PATIENT');
      setpaymentFrequency(user?.paymentFrequency);
      setgrantPayoutBankDetails(getBankDetails(user?.bankDetails, 'GRANT'));
      setrebatePayoutBankDetails(getBankDetails(user?.bankDetails, 'REBATE'));
      if (user?.grantPaymentDate) {
        setDayDate('DATE');
        setgrantPaymentDate(user?.grantPaymentDate);
      } else {
        setDayDate(5);
        setgrantPaymentDay(user?.grantPaymentDay);
        setgrantPaymentWeek(user?.grantPaymentWeek);
      }
    } else {
      setName('');
      setAddress('');
      setCity('');
      setState('');
      setCountry('');
    }
  }, [user, user_id, stateRecieved]);

  /**
   * Bank Details are the array of bank details saved.
   * Fetching the correct bankDetails according to the type and sending the bankDetails
   *
   * @param {Array} bankDetails
   * @param {String} type
   * @returns {Object}
   */
  const getBankDetails = (bankDetails, type) => {
    if (bankDetails &amp;&amp; bankDetails.length > 0) {
      const requiredBankDetails = bankDetails.find(
        (bank) => bank.accountType === type
      );
      if (requiredBankDetails) return requiredBankDetails;
      else
        return {
          accountNumber: '',
          bankIfscCode: '',
          bankBranch: '',
          bankName: '',
          accountType: type,
        };
    } else
      return {
        accountNumber: '',
        bankIfscCode: '',
        bankBranch: '',
        bankName: '',
        accountType: type,
      };
  };

  /** The below code is using the `useEffect` hook in a React component. It is watching for changes in
  the `user_id` and `showLender` variables and running the `showLender` function with the `user_id`
  as an argument if `user_id` is truthy. This is likely used to update the component's state or
  render based on changes to the `user_id`. */
  useEffect(() => {
    if (user_id) {
      showLender(user_id);
    }
  }, [user_id, showLender]);

  /**
   * The function takes an array of bank details and returns a new array with capitalized account
   * numbers, IFSC codes, and capitalized every word of bank branch and bank name.
   * @returns The function `getCaptalizedBankDetails` returns an array of bank details objects with the
   * account number and bank IFSC code capitalized and the bank branch and bank name with every word
   * capitalized.
   * @param {Array} bankDetails
   */
  const getCaptalizedBankDetails = (bankDetails) => {
    const reqBankDetails = bankDetails.map((bank) => {
      return {
        ...bank,
        accountNumber: bank?.accountNumber
          ? bank?.accountNumber.toUpperCase()
          : null,
        bankIfscCode: bank?.bankIfscCode
          ? bank.bankIfscCode.toUpperCase()
          : null,
        bankBranch: captalizeEveryWordOfSentence(bank.bankBranch),
        bankName: captalizeEveryWordOfSentence(bank.bankName),
      };
    });
    return reqBankDetails;
  };

  /**
   * Submits the user entered details to the api,
   * if Lender id is null it will create Lender or this will update
   * the existing Lender with Lender id
   * @param {any} e
   */
  const handleSubmit = (e) => {
    e.preventDefault();
    const data = {
      lenderName: captalizeEveryWordOfSentence(name),
      lenderAddress: captalizeEveryWordOfSentence(address),
      lenderCity: city,
      lenderState: state,
      lenderCountry: country,
      paySubventionTo,
      payRebateTo,
    };
    if (paySubventionTo === 'LENDER' &amp;&amp; payRebateTo === 'LENDER') {
      data['bankDetails'] = [grantPayoutBankDetails, rebatePayoutBankDetails];
      data['paymentFrequency'] = paymentFrequency;
      if (paymentFrequency === 'MONTHLY') {
        if (dayDate === 'DATE') data['grantPaymentDate'] = grantPaymentDate;
        else {
          data['grantPaymentDay'] = grantPaymentDay;
          data['grantPaymentWeek'] = grantPaymentWeek ? grantPaymentWeek : 5;
        }
      }
    } else if (paySubventionTo === 'LENDER' &amp;&amp; payRebateTo === 'PATIENT') {
      data['bankDetails'] = [grantPayoutBankDetails];
      data['paymentFrequency'] = paymentFrequency;
      if (paymentFrequency === 'MONTHLY') {
        if (dayDate === 'DATE') data['grantPaymentDate'] = grantPaymentDate;
        else {
          data['grantPaymentDay'] = grantPaymentDay;
          data['grantPaymentWeek'] = grantPaymentWeek ? grantPaymentWeek : 5;
        }
      }
    } else if (paySubventionTo === 'PATIENT' &amp;&amp; payRebateTo === 'LENDER') {
      data['bankDetails'] = [rebatePayoutBankDetails];
    }

    if (paySubventionTo === 'LENDER' || payRebateTo === 'LENDER') {
      data['bankDetails'] = getCaptalizedBankDetails(data.bankDetails);
    }

    /**
     * This function redirects the user to the Lenders page upon successful completion of a task.
     */
    const customSuccessCallback = () => {
      history(Routes.Lenders.path);
    };

    // console.log('DATA=>', data);
    if (paySubventionTo === 'LENDER') {
      const reqData = getDrugLenderReqData(
        drugLenderData,
        'drugId',
        user_id,
        'lenderId'
      );
      data['lenderDrugGrantSet'] = reqData;
      if (!isArrayLengthEqual(reqData, drugList)) {
        dispatch(
          setToast(
            ALERT_MESSAGE.ALL_GRANT_LENDER_DATA_NOT_PRESENT,
            true,
            'warning'
          )
        );
        return;
      }
    }
    if (user_id) {
      props.updateLender(user_id, data, customSuccessCallback);
    } else {
      props.createLender(data, customSuccessCallback);
    }
  };

  /**
   *
   * This function helps setting the value of the bank details for rebate and grant payout bank details
   * @param {String} value
   * @param {String} name
   * @param {String} state
   * @param {Function} setBankDetailsState
   */
  const onBankDetailsChange = (value, name, state, setBankDetailsState) => {
    setBankDetailsState({...state, [name]: value});
  };

  /**
   * This component render bank details for Grant/Subvention bank details and also for Rebate Bank Details,
   * title is the H6 element that we want to display
   * State is the state which we are perfoming change
   * setState is the callback function to change the state
   *
   * @param {Srting} title
   * @param {String} state
   * @param {Function} setState
   *
   */
  const renderBankDetails = (title, state, setState) => {
    return (
      &lt;>
        &lt;h6>{title ? title : 'Bank Account Details'}&lt;/h6>
        &lt;Row className="row-cols-sm-2 row-cols-md-3 row-cols-lg-3">
          &lt;Col className="col-sm-12 col-md-6 col-lg-4">
            &lt;Card className="border-0">
              &lt;Card.Body>
                &lt;InputForm
                  isView={false}
                  readOnly={isView}
                  label={t('loanApplication:bankAccountNumber')}
                  ipValue={state?.accountNumber}
                  lablevalue={state?.accountNumber}
                  name="accountNumber"
                  onChange={(e) =>
                    onBankDetailsChange(
                      e.target.value,
                      e.target.name,
                      state,
                      setState
                    )
                  }
                  required
                  warningText={t('loanApplication:requiredField')}
                  type="text"
                />
              &lt;/Card.Body>
            &lt;/Card>
          &lt;/Col>
          &lt;Col className="col-sm-12 col-md-6 col-lg-4">
            &lt;Card className="border-0">
              &lt;Card.Body>
                &lt;InputForm
                  isView={false}
                  readOnly={isView}
                  label={t('loanApplication:bankName')}
                  ipValue={state?.bankName}
                  lablevalue={state?.bankName}
                  name="bankName"
                  onChange={(e) =>
                    onBankDetailsChange(
                      e.target.value,
                      e.target.name,
                      state,
                      setState
                    )
                  }
                  required
                  type="text"
                />
              &lt;/Card.Body>
            &lt;/Card>
          &lt;/Col>
          &lt;Col className="col-sm-12 col-md-6 col-lg-4">
            &lt;Card className="border-0">
              &lt;Card.Body>
                &lt;InputForm
                  isView={false}
                  readOnly={isView}
                  label={t('loanApplication:bankBranch')}
                  ipValue={state?.bankBranch}
                  name="bankBranch"
                  lablevalue={state?.bankBranch}
                  onChange={(e) =>
                    onBankDetailsChange(
                      e.target.value,
                      e.target.name,
                      state,
                      setState
                    )
                  }
                  required
                  type="text"
                />
              &lt;/Card.Body>
            &lt;/Card>
          &lt;/Col>
          &lt;Col className="col-sm-12 col-md-6 col-lg-4">
            &lt;Card className="border-0">
              &lt;Card.Body>
                &lt;InputForm
                  isView={false}
                  readOnly={isView}
                  label={t('loanApplication:bankIFSCCode')}
                  ipValue={state?.bankIfscCode}
                  lablevalue={state?.bankIfscCode}
                  onChange={(e) =>
                    onBankDetailsChange(
                      e.target.value,
                      e.target.name,
                      state,
                      setState
                    )
                  }
                  name="bankIfscCode"
                  required
                  type="text"
                />
              &lt;/Card.Body>
            &lt;/Card>
          &lt;/Col>
        &lt;/Row>
      &lt;/>
    );
  };

  /**
   * This function adds new data to an array and updates the state, then calls a callback function.
   * @param {Object} data
   * @param {Function} callback
   */
  const onAddDrugLender = (data, callback) => {
    const newData = [...drugLenderData];
    newData.push(data);
    setdrugLenderData(newData);
    callback();
  };

  // console.log('DRUG LENDER DATA=>', drugLenderData);

  return (
    &lt;>
      &lt;Form className="lender-container " onSubmit={handleSubmit}>
        &lt;h3>
          {user_id &amp;&amp; isView
            ? t('View Lender')
            : user_id
            ? t('updateLender')
            : t('createLender')}
        &lt;/h3>

        &lt;Container className="bg-white px-4 py-4 rounded mt-4">
          &lt;Row className="row-cols-sm-2 row-cols-md-3 row-cols-lg-3">
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('name')}
                    type="text"
                    placeholder={t('enterName')}
                    isView={false}
                    readOnly={isView}
                    ipValue={name}
                    onChange={(e) => setName(e.target.value)}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('address')}
                    type="text"
                    placeholder={t('enterAddress')}
                    isView={false}
                    readOnly={isView}
                    ipValue={address}
                    onChange={(e) => setAddress(e.target.value)}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('country')}
                    type="select"
                    isView={false}
                    readOnly={isView}
                    ipValue={country}
                    onChange={(e) => setCountry(e.target.value)}
                    options={returnMasterDataSelectValues(
                      masterData?.countries
                    )}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
          &lt;/Row>
          &lt;Row className="row-cols-sm-2 row-cols-md-3 row-cols-lg-3">
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('state')}
                    type="select"
                    isView={false}
                    readOnly={isView}
                    ipValue={state}
                    onChange={(e) => {
                      const value = e.target.value;
                      setState(value);
                      const relatedState = masterData.states.find(
                        (state) => state.name === value
                      );

                      if (relatedState)
                        dispatch(
                          getCitiesFromStateId(relatedState?.id, 'cities')
                        );
                    }}
                    options={returnMasterDataSelectValues(masterData?.states)}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('city')}
                    type="select"
                    isView={false}
                    readOnly={isView}
                    ipValue={city}
                    onChange={(e) => setCity(e.target.value)}
                    options={returnMasterDataSelectValues(masterData?.cities)}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
          &lt;/Row>
        &lt;/Container>
        &lt;Container className="bg-white px-4 py-4 rounded mt-4">
          &lt;h5 className="mb-3">Subvention/Grant Payout Details&lt;/h5>
          &lt;Row className="row-cols-sm-2 row-cols-md-3 row-cols-lg-3">
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t(
                      'Choose subvention / grant to be paid to patient or lender'
                    )}
                    type="radio"
                    isView={false}
                    readOnly={isView}
                    ipValue={paySubventionTo}
                    onChange={(e) => setpaySubventionTo(e.target.value)}
                    radioData={subventionAmountPaidOption}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
            {paySubventionTo === 'LENDER' &amp;&amp; (
              &lt;>
                &lt;Col className="col-sm-12 col-md-6 col-lg-4">
                  &lt;Card className="border-0">
                    &lt;Card.Body>
                      &lt;InputForm
                        label={t('Payment Frequency')}
                        type="select"
                        isView={false}
                        readOnly={isView}
                        ipValue={paymentFrequency}
                        onChange={(e) => setpaymentFrequency(e.target.value)}
                        options={paymentFrequencyData}
                      />
                    &lt;/Card.Body>
                  &lt;/Card>
                &lt;/Col>
                {paymentFrequency === 'MONTHLY' &amp;&amp; (
                  &lt;>
                    &lt;Col className="col-sm-12 col-md-6 col-lg-4">
                      &lt;Card className="border-0">
                        &lt;Card.Body>
                          &lt;InputForm
                            label={t('Day/Last Weekday For Grant')}
                            type="select"
                            isView={false}
                            readOnly={isView}
                            ipValue={dayDate}
                            onChange={(e) => setDayDate(e.target.value)}
                            options={dateOrDayOption}
                          />
                        &lt;/Card.Body>
                      &lt;/Card>
                    &lt;/Col>
                    {dayDate === 'DATE' ? (
                      &lt;Col className="col-sm-12 col-md-6 col-lg-4">
                        &lt;Card className="border-0">
                          &lt;Card.Body>
                            &lt;InputForm
                              label={t('Date')}
                              type="select"
                              isView={false}
                              readOnly={isView}
                              ipValue={grantPaymentDate}
                              onChange={(e) =>
                                setgrantPaymentDate(e.target.value)
                              }
                              options={dateData}
                            />
                          &lt;/Card.Body>
                        &lt;/Card>
                      &lt;/Col>
                    ) : (
                      &lt;>
                        {' '}
                        &lt;Col className="col-sm-12 col-md-6 col-lg-4">
                          &lt;Card className="border-0">
                            &lt;Card.Body>
                              &lt;InputForm
                                label={t('Last Weekday')}
                                type="select"
                                isView={false}
                                readOnly={isView}
                                ipValue={grantPaymentDay}
                                onChange={(e) =>
                                  setgrantPaymentDay(e.target.value)
                                }
                                options={lastWeekData}
                              />
                            &lt;/Card.Body>
                          &lt;/Card>
                        &lt;/Col>
                      &lt;/>
                    )}
                  &lt;/>
                )}
              &lt;/>
            )}
          &lt;/Row>

          {paySubventionTo === 'LENDER' &amp;&amp;
            renderBankDetails(
              'Grant Payout Bank Account Details',
              grantPayoutBankDetails,
              setgrantPayoutBankDetails
            )}
        &lt;/Container>
        {paySubventionTo === 'LENDER' &amp;&amp; (
          &lt;LenderDrugMapping
            apiData={user_id ? user : null}
            isView={isView}
            selectLabel={'Medication'}
            tableSelectValue="drugId"
            selectOptions={drugList}
            onAddDataClick={onAddDrugLender}
            setTableData={setdrugLenderData}
            tableConfig={
              isView ? tableLenderDrugConfigView : tableLenderDrugConfig
            }
            tableData={drugLenderData}
            containerClasses="bg-white px-4 py-4 rounded mt-4"
            addButtonClasses="mt-2"
          />
        )}
        &lt;Container className="bg-white px-4 py-4 rounded mt-4">
          &lt;h5 className="mb-3">Rebate Payout Details&lt;/h5>
          &lt;Row className="row-cols-sm-2 row-cols-md-3 row-cols-lg-3">
            &lt;Col className="col-sm-12 col-md-6 col-lg-4">
              &lt;Card className="border-0">
                &lt;Card.Body>
                  &lt;InputForm
                    label={t('Choose rebate to be paid to patient or lender')}
                    type="radio"
                    isView={false}
                    readOnly={isView}
                    ipValue={payRebateTo}
                    onChange={(e) => setpayRebateTo(e.target.value)}
                    radioData={rebateAmountPaidOption}
                  />
                &lt;/Card.Body>
              &lt;/Card>
            &lt;/Col>
          &lt;/Row>
          {payRebateTo === 'LENDER' &amp;&amp;
            renderBankDetails(
              'Rebate Payout Bank Account Details',
              rebatePayoutBankDetails,
              setrebatePayoutBankDetails
            )}
        &lt;/Container>
        &lt;div className="d-flex gap-2 mt-3 ms-2">
          &lt;GoBack>
            &lt;button
              className="btn-patient-theme-small bg-dark px-4"
              type="button">
              {t('Back')}
            &lt;/button>
          &lt;/GoBack>
          {isView ? (
            &lt;Can
              performingAction={{
                component: 'lender-listing',
                action: 'can view editDetails',
              }}>
              &lt;RoutePage url={Routes.UpdateLender.path} id={user_id}>
                &lt;button
                  className="btn-patient-theme-small bg-dark px-4"
                  type="button"
                  onClick={() => setisView(false)}>
                  Edit
                &lt;/button>
              &lt;/RoutePage>
            &lt;/Can>
          ) : (
            &lt;button
              className="btn-patient-theme-small bg-dark px-4"
              type="submit"
              onSubmit={handleSubmit}>
              {user_id ? t('update') : t('add')}
            &lt;/button>
          )}
        &lt;/div>
      &lt;/Form>
    &lt;/>
  );
};

const mapStateToProps = (state) => ({
  usersList: state.lenders.usersList,
  roleList: state.role.roleList,
  user: state.lenders.selectedUser,
});

const mapDispatchToProps = {
  createLender,
  showLender,
  updateLender,
  readRoleList,
};
NewLender.propTypes = {
  usersList: PropTypes.array,
  createLender: PropTypes.func,
  showLender: PropTypes.func,
  updateLender: PropTypes.func,
  readRoleList: PropTypes.func,
  roleList: PropTypes.array,
  user: PropTypes.object,
};
export default connect(mapStateToProps, mapDispatchToProps)(NewLender);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#aadharValidator">aadharValidator</a></li><li><a href="global.html#accessDenied">accessDenied</a></li><li><a href="global.html#acknowledgeFirstGrant">acknowledgeFirstGrant</a></li><li><a href="global.html#acknowledgeRebatePaid">acknowledgeRebatePaid</a></li><li><a href="global.html#acknowledgeSubventionPaid">acknowledgeSubventionPaid</a></li><li><a href="global.html#actionTypes">actionTypes</a></li><li><a href="global.html#addDrugReceiptAmount">addDrugReceiptAmount</a></li><li><a href="global.html#addHoliday">addHoliday</a></li><li><a href="global.html#adminEndPoint">adminEndPoint</a></li><li><a href="global.html#allManufacturers">allManufacturers</a></li><li><a href="global.html#apiEnd">apiEnd</a></li><li><a href="global.html#apiError">apiError</a></li><li><a href="global.html#apiErrorReport">apiErrorReport</a></li><li><a href="global.html#apiStart">apiStart</a></li><li><a href="global.html#approveLoanForPatient">approveLoanForPatient</a></li><li><a href="global.html#areEqual">areEqual</a></li><li><a href="global.html#assignDoctorToPatient">assignDoctorToPatient</a></li><li><a href="global.html#assignLenderToPatient">assignLenderToPatient</a></li><li><a href="global.html#assignTreatmentInitiationDateToPatient">assignTreatmentInitiationDateToPatient</a></li><li><a href="global.html#cancelApplication">cancelApplication</a></li><li><a href="global.html#capitalizeFirstLetter">capitalizeFirstLetter</a></li><li><a href="global.html#captalizeEveryWordOfSentence">captalizeEveryWordOfSentence</a></li><li><a href="global.html#checkifReportsDataInSync">checkifReportsDataInSync</a></li><li><a href="global.html#checkIfRouteIsProtected">checkIfRouteIsProtected</a></li><li><a href="global.html#checkifValueExists">checkifValueExists</a></li><li><a href="global.html#checkMasterValue">checkMasterValue</a></li><li><a href="global.html#checkMinMaxValue">checkMinMaxValue</a></li><li><a href="global.html#checkStrongPassword">checkStrongPassword</a></li><li><a href="global.html#checkValue">checkValue</a></li><li><a href="global.html#clearPatientTimelineUrl">clearPatientTimelineUrl</a></li><li><a href="global.html#completeProfile">completeProfile</a></li><li><a href="global.html#contactSupport">contactSupport</a></li><li><a href="global.html#convertMedicationName">convertMedicationName</a></li><li><a href="global.html#convertTimeToLocal">convertTimeToLocal</a></li><li><a href="global.html#convertToCorrectDataType">convertToCorrectDataType</a></li><li><a href="global.html#createApplicant">createApplicant</a></li><li><a href="global.html#createBulkDoctor">createBulkDoctor</a></li><li><a href="global.html#createDoctor">createDoctor</a></li><li><a href="global.html#createDrug">createDrug</a></li><li><a href="global.html#createHospital">createHospital</a></li><li><a href="global.html#createHospitalIpConfig">createHospitalIpConfig</a></li><li><a href="global.html#createLender">createLender</a></li><li><a href="global.html#createManufacturer">createManufacturer</a></li><li><a href="global.html#createMobileVersion">createMobileVersion</a></li><li><a href="global.html#createPermission">createPermission</a></li><li><a href="global.html#createProgram">createProgram</a></li><li><a href="global.html#createResource">createResource</a></li><li><a href="global.html#createRole">createRole</a></li><li><a href="global.html#createRoute">createRoute</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#CustomReactSelect">CustomReactSelect</a></li><li><a href="global.html#dateValidator">dateValidator</a></li><li><a href="global.html#decodeToken">decodeToken</a></li><li><a href="global.html#deleteApplicant">deleteApplicant</a></li><li><a href="global.html#deleteBank">deleteBank</a></li><li><a href="global.html#deleteCancerType">deleteCancerType</a></li><li><a href="global.html#deleteCity">deleteCity</a></li><li><a href="global.html#deleteClinicalDropout">deleteClinicalDropout</a></li><li><a href="global.html#deleteCompanyType">deleteCompanyType</a></li><li><a href="global.html#deleteCountry">deleteCountry</a></li><li><a href="global.html#deleteDoctor">deleteDoctor</a></li><li><a href="global.html#deleteDoctorChangeReason">deleteDoctorChangeReason</a></li><li><a href="global.html#deleteDocument">deleteDocument</a></li><li><a href="global.html#deleteDrug">deleteDrug</a></li><li><a href="global.html#deleteEducationLevel">deleteEducationLevel</a></li><li><a href="global.html#deleteEmployer">deleteEmployer</a></li><li><a href="global.html#deleteExperience">deleteExperience</a></li><li><a href="global.html#deleteGrossAnnualIncomes">deleteGrossAnnualIncomes</a></li><li><a href="global.html#deleteHospital">deleteHospital</a></li><li><a href="global.html#deleteHospitalIpConfig">deleteHospitalIpConfig</a></li><li><a href="global.html#deleteIncomeRange">deleteIncomeRange</a></li><li><a href="global.html#deleteIndustry">deleteIndustry</a></li><li><a href="global.html#deleteInsuranceCompany">deleteInsuranceCompany</a></li><li><a href="global.html#deleteLanguage">deleteLanguage</a></li><li><a href="global.html#deleteLender">deleteLender</a></li><li><a href="global.html#deleteManufacturer">deleteManufacturer</a></li><li><a href="global.html#deleteNatureOfBusiness">deleteNatureOfBusiness</a></li><li><a href="global.html#deleteNonClinicalDropout">deleteNonClinicalDropout</a></li><li><a href="global.html#deleteOccupation">deleteOccupation</a></li><li><a href="global.html#deletePatientStatus">deletePatientStatus</a></li><li><a href="global.html#deletePermission">deletePermission</a></li><li><a href="global.html#deleteProfession">deleteProfession</a></li><li><a href="global.html#deleteProgram">deleteProgram</a></li><li><a href="global.html#deleteRelationship">deleteRelationship</a></li><li><a href="global.html#deleteResidenceType">deleteResidenceType</a></li><li><a href="global.html#deleteResource">deleteResource</a></li><li><a href="global.html#deleteRole">deleteRole</a></li><li><a href="global.html#deleteRoute">deleteRoute</a></li><li><a href="global.html#deleteState">deleteState</a></li><li><a href="global.html#deleteYearsInBusiness">deleteYearsInBusiness</a></li><li><a href="global.html#disableMobileVersion">disableMobileVersion</a></li><li><a href="global.html#dobValidator">dobValidator</a></li><li><a href="global.html#doctorsList">doctorsList</a></li><li><a href="global.html#documentData">documentData</a></li><li><a href="global.html#downloadDocument">downloadDocument</a></li><li><a href="global.html#drugsList">drugsList</a></li><li><a href="global.html#dynamicMessageCreation">dynamicMessageCreation</a></li><li><a href="global.html#editTreatmentForPatient">editTreatmentForPatient</a></li><li><a href="global.html#educationLevelOptions">educationLevelOptions</a></li><li><a href="global.html#emailValidator">emailValidator</a></li><li><a href="global.html#enrollForVbc">enrollForVbc</a></li><li><a href="global.html#fileSizeValidator">fileSizeValidator</a></li><li><a href="global.html#fileTypeValidator">fileTypeValidator</a></li><li><a href="global.html#flushLocalStorage">flushLocalStorage</a></li><li><a href="global.html#forgotPassword">forgotPassword</a></li><li><a href="global.html#formatEndpoint">formatEndpoint</a></li><li><a href="global.html#GenericRoutes">GenericRoutes</a></li><li><a href="global.html#getAllApprovalRegPatients">getAllApprovalRegPatients</a></li><li><a href="global.html#getApplicantOverview">getApplicantOverview</a></li><li><a href="global.html#getApprovalRegPatients">getApprovalRegPatients</a></li><li><a href="global.html#getCitiesFromStateId">getCitiesFromStateId</a></li><li><a href="global.html#getClinicalNotesDetails">getClinicalNotesDetails</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#getDiscontinuationAndAdverseEvents">getDiscontinuationAndAdverseEvents</a></li><li><a href="global.html#getDoctorPatientsList">getDoctorPatientsList</a></li><li><a href="global.html#getDoctorsByHospitalId">getDoctorsByHospitalId</a></li><li><a href="global.html#getDocumentName">getDocumentName</a></li><li><a href="global.html#getDocumentType">getDocumentType</a></li><li><a href="global.html#getDrugLenderReqData">getDrugLenderReqData</a></li><li><a href="global.html#getEnrollForVbc">getEnrollForVbc</a></li><li><a href="global.html#getFinancialInformation">getFinancialInformation</a></li><li><a href="global.html#getHolidaysForYear">getHolidaysForYear</a></li><li><a href="global.html#getIndividualPatientData">getIndividualPatientData</a></li><li><a href="global.html#getLabsReportsDetails">getLabsReportsDetails</a></li><li><a href="global.html#getLoanAmount">getLoanAmount</a></li><li><a href="global.html#getLoanApplicationDetails">getLoanApplicationDetails</a></li><li><a href="global.html#getMangoPatientDetails">getMangoPatientDetails</a></li><li><a href="global.html#getMangoPatientList">getMangoPatientList</a></li><li><a href="global.html#getMasterData">getMasterData</a></li><li><a href="global.html#getMedicationDetails">getMedicationDetails</a></li><li><a href="global.html#getMedicationScheduleByDrugId">getMedicationScheduleByDrugId</a></li><li><a href="global.html#getMonthsDataSorted">getMonthsDataSorted</a></li><li><a href="global.html#getNewPatientStats">getNewPatientStats</a></li><li><a href="global.html#getNotifications">getNotifications</a></li><li><a href="global.html#getOtherTests">getOtherTests</a></li><li><a href="global.html#getOtherTreatment">getOtherTreatment</a></li><li><a href="global.html#getPatientLongitudinality">getPatientLongitudinality</a></li><li><a href="global.html#getPatientRecruitmentAndConversion">getPatientRecruitmentAndConversion</a></li><li><a href="global.html#getPatientReportedOutcomes">getPatientReportedOutcomes</a></li><li><a href="global.html#getPatientTimeLineUrl">getPatientTimeLineUrl</a></li><li><a href="global.html#getPendingPatientList">getPendingPatientList</a></li><li><a href="global.html#getPerPatientRevenue">getPerPatientRevenue</a></li><li><a href="global.html#getQueryString">getQueryString</a></li><li><a href="global.html#getRadiationTherapy">getRadiationTherapy</a></li><li><a href="global.html#getRadiologyReportsDetails">getRadiologyReportsDetails</a></li><li><a href="global.html#getReportSyncFlag">getReportSyncFlag</a></li><li><a href="global.html#getSalesAndFreePacks">getSalesAndFreePacks</a></li><li><a href="global.html#getSummaryNotesDetails">getSummaryNotesDetails</a></li><li><a href="global.html#getSundaysForYear">getSundaysForYear</a></li><li><a href="global.html#getSurgicalDetails">getSurgicalDetails</a></li><li><a href="global.html#getSurvivalAndResponse">getSurvivalAndResponse</a></li><li><a href="global.html#getUserDetails">getUserDetails</a></li><li><a href="global.html#getUserPermissions">getUserPermissions</a></li><li><a href="global.html#getUsersWithDeviceToken">getUsersWithDeviceToken</a></li><li><a href="global.html#getVbcDrugSchedule">getVbcDrugSchedule</a></li><li><a href="global.html#getVbcSchedule">getVbcSchedule</a></li><li><a href="global.html#handleRegRequest">handleRegRequest</a></li><li><a href="global.html#hospitalsGroupList">hospitalsGroupList</a></li><li><a href="global.html#hospitalsList">hospitalsList</a></li><li><a href="global.html#i18nLanguages">i18nLanguages</a></li><li><a href="global.html#insertDashInAadharNumber">insertDashInAadharNumber</a></li><li><a href="global.html#isApplicantDocumentsUploaded">isApplicantDocumentsUploaded</a></li><li><a href="global.html#isArrayLengthEqual">isArrayLengthEqual</a></li><li><a href="global.html#isValueNull">isValueNull</a></li><li><a href="global.html#jumpProgramStep">jumpProgramStep</a></li><li><a href="global.html#LabelValue">LabelValue</a></li><li><a href="global.html#LenderDrugMapping">LenderDrugMapping</a></li><li><a href="global.html#mangoExecutiveAddPatient">mangoExecutiveAddPatient</a></li><li><a href="global.html#markGrantPaid">markGrantPaid</a></li><li><a href="global.html#markRebatePaid">markRebatePaid</a></li><li><a href="global.html#mobileValidator">mobileValidator</a></li><li><a href="global.html#modulesList">modulesList</a></li><li><a href="global.html#MONTH">MONTH</a></li><li><a href="global.html#myProfile">myProfile</a></li><li><a href="global.html#onSideBarRouteClicked">onSideBarRouteClicked</a></li><li><a href="global.html#panValidator">panValidator</a></li><li><a href="global.html#PAYMENT_FRAMEWORK">PAYMENT_FRAMEWORK</a></li><li><a href="global.html#permissionsList">permissionsList</a></li><li><a href="global.html#readAndroidMobileVersionsList">readAndroidMobileVersionsList</a></li><li><a href="global.html#readApplicantsList">readApplicantsList</a></li><li><a href="global.html#readBanks">readBanks</a></li><li><a href="global.html#readCancerTypeList">readCancerTypeList</a></li><li><a href="global.html#readClinicalDropoutReasons">readClinicalDropoutReasons</a></li><li><a href="global.html#readCompanyTypes">readCompanyTypes</a></li><li><a href="global.html#readCountries">readCountries</a></li><li><a href="global.html#readDoctorChangeReasons">readDoctorChangeReasons</a></li><li><a href="global.html#readDoctors">readDoctors</a></li><li><a href="global.html#readDocuments">readDocuments</a></li><li><a href="global.html#readDrugs">readDrugs</a></li><li><a href="global.html#readEducationLevelList">readEducationLevelList</a></li><li><a href="global.html#readEmployerList">readEmployerList</a></li><li><a href="global.html#readExperienceList">readExperienceList</a></li><li><a href="global.html#readGrossAnnualIncomes">readGrossAnnualIncomes</a></li><li><a href="global.html#readHospitalIpConfigList">readHospitalIpConfigList</a></li><li><a href="global.html#readHospitals">readHospitals</a></li><li><a href="global.html#readIncomeRangeList">readIncomeRangeList</a></li><li><a href="global.html#readIndustryTypes">readIndustryTypes</a></li><li><a href="global.html#readInsuranceCompanies">readInsuranceCompanies</a></li><li><a href="global.html#readIosMobileVersionsList">readIosMobileVersionsList</a></li><li><a href="global.html#readLanguageList">readLanguageList</a></li><li><a href="global.html#readLenders">readLenders</a></li><li><a href="global.html#readManufacturers">readManufacturers</a></li><li><a href="global.html#readMobileVersionsList">readMobileVersionsList</a></li><li><a href="global.html#readNatureOfBusiness">readNatureOfBusiness</a></li><li><a href="global.html#readNonClinicalDropoutReasons">readNonClinicalDropoutReasons</a></li><li><a href="global.html#readNotification">readNotification</a></li><li><a href="global.html#readOccupationList">readOccupationList</a></li><li><a href="global.html#readPatientStatuses">readPatientStatuses</a></li><li><a href="global.html#readPermissionList">readPermissionList</a></li><li><a href="global.html#readProfessionList">readProfessionList</a></li><li><a href="global.html#readProgram">readProgram</a></li><li><a href="global.html#readRelationshipList">readRelationshipList</a></li><li><a href="global.html#readResidenceTypeList">readResidenceTypeList</a></li><li><a href="global.html#readResourceList">readResourceList</a></li><li><a href="global.html#readResourcePermissionList">readResourcePermissionList</a></li><li><a href="global.html#readRoleList">readRoleList</a></li><li><a href="global.html#readRouteList">readRouteList</a></li><li><a href="global.html#readStates">readStates</a></li><li><a href="global.html#readUsers">readUsers</a></li><li><a href="global.html#readYearsInBusiness">readYearsInBusiness</a></li><li><a href="global.html#reapplyApplication">reapplyApplication</a></li><li><a href="global.html#registerPatient">registerPatient</a></li><li><a href="global.html#rejectLoanForPatient">rejectLoanForPatient</a></li><li><a href="global.html#removeDashInAadharNumber">removeDashInAadharNumber</a></li><li><a href="global.html#requiredDocuments">requiredDocuments</a></li><li><a href="global.html#resetPassword">resetPassword</a></li><li><a href="global.html#resetPatientDetails">resetPatientDetails</a></li><li><a href="global.html#returnMasterDataSelectValues">returnMasterDataSelectValues</a></li><li><a href="global.html#rolesList">rolesList</a></li><li><a href="global.html#Routes">Routes</a></li><li><a href="global.html#routesList">routesList</a></li><li><a href="global.html#saveNotificationInStore">saveNotificationInStore</a></li><li><a href="global.html#secureLocalStorage">secureLocalStorage</a></li><li><a href="global.html#selectMonthWithData">selectMonthWithData</a></li><li><a href="global.html#sendPushNotification">sendPushNotification</a></li><li><a href="global.html#sendVerificationOtp">sendVerificationOtp</a></li><li><a href="global.html#sentryReduxEnhancer">sentryReduxEnhancer</a></li><li><a href="global.html#sentryTransformedAction">sentryTransformedAction</a></li><li><a href="global.html#sentryTransformedState">sentryTransformedState</a></li><li><a href="global.html#setClientPaginationData">setClientPaginationData</a></li><li><a href="global.html#setCookie">setCookie</a></li><li><a href="global.html#setForceLogout">setForceLogout</a></li><li><a href="global.html#setKeycloakData">setKeycloakData</a></li><li><a href="global.html#setLoader">setLoader</a></li><li><a href="global.html#setNewToken">setNewToken</a></li><li><a href="global.html#setPatientId">setPatientId</a></li><li><a href="global.html#setSelectedRole">setSelectedRole</a></li><li><a href="global.html#setToast">setToast</a></li><li><a href="global.html#setupStore">setupStore</a></li><li><a href="global.html#setUserData">setUserData</a></li><li><a href="global.html#shorternUrl">shorternUrl</a></li><li><a href="global.html#showDoctor">showDoctor</a></li><li><a href="global.html#showDrug">showDrug</a></li><li><a href="global.html#showHospital">showHospital</a></li><li><a href="global.html#showHospitalIpConfig">showHospitalIpConfig</a></li><li><a href="global.html#showLender">showLender</a></li><li><a href="global.html#showManufacturer">showManufacturer</a></li><li><a href="global.html#showPermission">showPermission</a></li><li><a href="global.html#showProgram">showProgram</a></li><li><a href="global.html#showResource">showResource</a></li><li><a href="global.html#showRole">showRole</a></li><li><a href="global.html#showRoute">showRoute</a></li><li><a href="global.html#showUser">showUser</a></li><li><a href="global.html#sortObjectKeysByName">sortObjectKeysByName</a></li><li><a href="global.html#splitCamelCaseString">splitCamelCaseString</a></li><li><a href="global.html#startLoanApplicationSteps">startLoanApplicationSteps</a></li><li><a href="global.html#store">store</a></li><li><a href="global.html#submitLoanApplication">submitLoanApplication</a></li><li><a href="global.html#submitToMangoExecutive">submitToMangoExecutive</a></li><li><a href="global.html#THEME_MODULE">THEME_MODULE</a></li><li><a href="global.html#toggelDrugVisibility">toggelDrugVisibility</a></li><li><a href="global.html#TOKEN">TOKEN</a></li><li><a href="global.html#trimmer">trimmer</a></li><li><a href="global.html#uniqueKeys">uniqueKeys</a></li><li><a href="global.html#updateApplicant">updateApplicant</a></li><li><a href="global.html#updateAppointmentDateToPatient">updateAppointmentDateToPatient</a></li><li><a href="global.html#updateChangePasswordStatus">updateChangePasswordStatus</a></li><li><a href="global.html#updateDataConsentDate">updateDataConsentDate</a></li><li><a href="global.html#updateDoctor">updateDoctor</a></li><li><a href="global.html#updateDrug">updateDrug</a></li><li><a href="global.html#updateFinancialInformation">updateFinancialInformation</a></li><li><a href="global.html#updateHospital">updateHospital</a></li><li><a href="global.html#updateHospitalIpConfig">updateHospitalIpConfig</a></li><li><a href="global.html#updateLender">updateLender</a></li><li><a href="global.html#updateManufacturer">updateManufacturer</a></li><li><a href="global.html#updateMedicationScheduleByCycleNo">updateMedicationScheduleByCycleNo</a></li><li><a href="global.html#updateMobileVersion">updateMobileVersion</a></li><li><a href="global.html#updateMultipleResourcePermission">updateMultipleResourcePermission</a></li><li><a href="global.html#updateMyProfile">updateMyProfile</a></li><li><a href="global.html#updateObject">updateObject</a></li><li><a href="global.html#updatePatientInteractionNotes">updatePatientInteractionNotes</a></li><li><a href="global.html#updatePatientStatusToAware">updatePatientStatusToAware</a></li><li><a href="global.html#updatePermssion">updatePermssion</a></li><li><a href="global.html#updateProgram">updateProgram</a></li><li><a href="global.html#updateResource">updateResource</a></li><li><a href="global.html#updateResourcePermissions">updateResourcePermissions</a></li><li><a href="global.html#updateRole">updateRole</a></li><li><a href="global.html#updateRoleAccess">updateRoleAccess</a></li><li><a href="global.html#updateRoute">updateRoute</a></li><li><a href="global.html#updateSubRoutes">updateSubRoutes</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#updateVersionMapping">updateVersionMapping</a></li><li><a href="global.html#uploadDocument">uploadDocument</a></li><li><a href="global.html#uploadDocumentForPatient">uploadDocumentForPatient</a></li><li><a href="global.html#usePrevious">usePrevious</a></li><li><a href="global.html#validateCommaSeperatedIP">validateCommaSeperatedIP</a></li><li><a href="global.html#validateURL">validateURL</a></li><li><a href="global.html#validateVerhoeffAlgo">validateVerhoeffAlgo</a></li><li><a href="global.html#validDateString">validDateString</a></li><li><a href="global.html#vbcProgramSteps">vbcProgramSteps</a></li><li><a href="global.html#verifyOtp">verifyOtp</a></li><li><a href="global.html#verifyPatient">verifyPatient</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Fri May 19 2023 18:39:27 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
